<!DOCTYPE html>
<html>
	<head>
		<script src="ip.php"></script>
		<script>
			function show_date_time() {
				window.setTimeout("show_date_time()", 1000);
				BirthDay = new Date("2022-06-05T00:07");
				today = new Date();
				timeold = (today.getTime() - BirthDay.getTime());
				sectimeold = timeold / 1000;
				secondsold = Math.floor(sectimeold);
				msPerDay = 24 * 60 * 60 * 1000;
				e_daysold = timeold / msPerDay;
				daysold = Math.floor(e_daysold);
				e_hrsold = (e_daysold - daysold) * 24;
				hrsold = Math.floor(e_hrsold);
				e_minsold = (e_hrsold - hrsold) * 60;
				minsold = Math.floor((e_hrsold - hrsold) * 60);
				seconds = Math.floor((e_minsold - minsold) * 60);
				var timeKi = document.getElementById('span_dt_dt');
				if (timeKi !== null) {
					span_dt_dt.innerHTML = "这是我们一起走过的";
					tian.innerHTML = daysold;
					shi.innerHTML = hrsold;
					fen.innerHTML = minsold;
					miao.innerHTML = seconds;
				}
			}

			show_date_time();
		</script>
		<!--
 * @Author: Ki.
 * @Date: 2022-12-21 07:35:43
 * @LastEditTime: 2022-12-21 07:51:06
 * @Description: 花有重开日 人无再少年
 * Copyright (c) 2022 by Ki All Rights Reserved. 
-->

		<!-- Like Girl v5.0.0 -->
		<!-- Copyright (c) 2022 Ki. -->
		<!-- Date：2022-09-10 -->
		<!-- Document：https://blog.kikiw.cn/index.php/archives/46/ -->
		<!-- Warning：禁止以任何方式出售本项目 如有发现一切后果自行负责 -->
		<!-- 开发不易 版权信息请保留 -->

		<script>
			console.log("%c Like Girl v5.0.0 | Powered by Ki",
				"color:#fff;background:linear-gradient(270deg,#986fee,#8695e6,#68b7dd,#18d7d3);padding:8px 15px;border-radius:15px"
				);
			console.log("%c Q | 3439780232", "color:#fff;background:#000;padding:8px 15px;border-radius:15px");
		</script>
		<link rel="shortcut icon" href="/favicon.ico" />
		<!-- 定义视窗 -->
		<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
		<!-- 引入思源宋体 -->
		<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@700&display=swap" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="css/leaving.css">
		<link rel="stylesheet" href="css/index.css">
		<link rel="stylesheet" href="css/animate.min.css">
		<link rel="stylesheet" href="css/little.css">
		<link rel="stylesheet" href="css/about.css">
		<link rel="stylesheet" href="../Botui/botui.min.css">
		<link rel="stylesheet" href="../Botui/botui-theme-default.css">
		<link rel="stylesheet" href="css/loveImg.css">
		<link rel="stylesheet" href="css/list.css">
		<link rel="stylesheet" href="Font/font_list/iconfont.css">
		<link rel="stylesheet" href="toastr/toastr.css">
		<link rel="stylesheet" href="css/loadinglike.css">
		<script src="Font/font_leav/iconfont.js"></script>
		<script src="Font/font_leav/iconfont.js"></script>
		<script src="../Botui/botui.min.js"></script>
		<script src="https://cdn.staticfile.org/vue/2.2.2/vue.min.js"></script>
		<script src="jquery/jquery.min.js"></script>
		<script src="js/jquery.pjax.js" type="text/javascript"></script>
		<script src="pagelir/spotlight.bundle.js"></script>
		<script src="js/loading.js"></script>
		<script src="js/nprogress.js"></script>
		<link href="css/nprogress.css" rel="stylesheet" type="text/css">
		<!-- 头部导航条 -->
		<div class="header-wrap">
			<div class="header">
				<div class="logo">
					<h1><a class="alogo" href="index.html">情侣空间</a></h1>
				</div>
				<div class="word">
					<span class="wenan">喜欢花 喜欢浪漫 喜欢你.~</span>
				</div>
			</div>
		</div>
		<!-- 头像内容 -->
		<div class="bg-wrap">
			<div class="bg-img">
				<div class="central central-800">
					<div class="middle animated bounce ">
						<div class="img-male">
							<img src="https://q1.qlogo.cn/g?b=qq&nk=2102642541&s=640" alt="">
							<span>Ki</span>
						</div>
						<div class="love-icon">
							<img src="Style/img/like.svg" alt="">
						</div>
						<div class="img-female">
							<img src="https://q1.qlogo.cn/g?b=qq&nk=2216814405&s=640" alt="">
							<span>Yi</span>
						</div>
					</div>
				</div>
				<svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
					viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
					<defs>
						<path id="gentle-wave"
							d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
					</defs>
					<g class="parallax">
						<use xlink:href="#gentle-wave" x="48" y="0" fill="rgba(255,255,255,0.7" />
						<use xlink:href="#gentle-wave" x="48" y="3" fill="rgba(255,255,255,0.5)" />
						<use xlink:href="#gentle-wave" x="48" y="5" fill="rgba(255,255,255,0.3)" />
						<use xlink:href="#gentle-wave" x="48" y="7" fill="#fff" />
					</g>
				</svg>
			</div>
		</div>

		<script>
			window.onscroll = function() {
				var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
				if (scrollTop > 500) {
					$('.wenan').css({
						'color': '#707070'
					});
					$('.alogo').css({
						'color': '#707070'
					});
				}

				if (scrollTop < 500) {
					$('.wenan').css({
						'color': '#fff'
					});
					$('.alogo').css({
						'color': '#fff'
					});
				}
			}
		</script>

		<style>
			.central.bg .row .card .leavform .textinfo .time {
				text-align: right;
				display: inherit;
				font-family: 'Noto Serif SC', serif;
				font-weight: 400;
				color: #423a3a;
			}

			.bg-img {
				background: url(https://img.gejiba.com/images/b0d44ed67e25235f552aacbe32d81b5c.jpg) no-repeat center !important;
				background-size: cover !important;
			}

			.wenan {
				color: #fff;
				transition: all 0.2s linear;
			}

			.alogo {
				color: #fff;
				transition: all 0.2s linear;
			}

			code {
				padding: 0.4rem 0.5rem;
				border-radius: 0.4rem;
				font-size: 1rem;
				color: #fa5c7c;
				background-color: rgba(250, 92, 124, .18);
				font-family: 'Noto Serif SC', serif;
				font-weight: 700;
			}

			quote {
				width: 98% !important;
			}

			/* webkit, opera, IE9 （谷歌浏览器）*/
			::selection {
				background: #6f6f6fc7;
				color: #ffffff;
			}

			/* mozilla firefox（火狐浏览器） */
			::-moz-selection {
				background: #6f6f6fc7;
				color: #ffffff;
			}

			.delay-03s {
				-webkit-animation-delay: .3s;
				animation-delay: .3s;
			}

			.Blurkg {
				backdrop-filter: blur(0px) !important;
				background: transparent !important;
			}

			.cpt-loading-mask.column {
				background: transparent !important;
			}
		</style>
		<style>
		</style>
		<meta charset="utf-8" />
		<title>Like_Girl5.0 — 留言板</title>
	</head>
	<body>

		<div id="pjax-container">
			<div class="central central-800 bg">
				<h3>已收到 <b>1</b> 条祝福留言<i class="jiequ">（显示最新 条）</i></h3>

				<div class="row">
					<div class="card col-lg-12 col-md-12 col-sm-12 col-sm-x-12">
						<form action="admin/leavingPost.php" method="post">
							<div class="inputbox">
								<img src="https://q1.qlogo.cn/g?b=qq&nk=1234567&s=100" alt="" class="avatar">
								<input id="QQ" type="text" name="qq" placeholder="QQ号码" class="rig">
								<svg class="leav_icon sm22" aria-hidden="true">
									<use xlink:href="#icon-xunzhang"></use>
								</svg>
								<input id="nickname" type="text" name="name" placeholder="昵称（自动获取）" class="let">
							</div>
							<textarea name="text" id="wenben" rows="8" placeholder="请输入您的留言内容（恶意留言会封禁IP...）"></textarea>
							<div class="input-sub">
								<input name="ip" value="222.128.57.72" type="hidden">
								<button type="button" id="leavingPost" class="tijiao"
									onclick="return testing()">提交留言</button>
							</div>
						</form>
					</div>
				</div>
			</div>
			<script>
				$('#QQ').blur(function() {
					loadingname();
					var QQ = $("#QQ").val();
					$.ajax({
						url: "https://api.usuuu.com/qq/" + QQ,
						type: "GET",
						timeout: 5000,
						dataType: "json",
						statusCode: {
							500: function(response) {
								setTimeout(function() {
									removeLoading('test');
									toastr["warning"]("获取失败 QQ号码错误", "Like_Girl");
								}, 2000);
							}
						},
						success: function(result) {
							if (result.code == 500) {
								removeLoading('test');
								toastr["warning"]("获取失败 QQ号码长度错误", "Like_Girl");
							}
							$("#nickname").val(result["data"].name);
							$(".avatar").attr("src", result["data"].avatar);
							setTimeout(function() {
								removeLoading('test');
								toastr["success"]("获取昵称头像成功", "Like_Girl");
							}, 1200);
						}
					});
				});

				function testing() {
					let qq = document.getElementsByName('qq')[0].value.trim();
					let name = document.getElementsByName('name')[0].value.trim();
					if (qq.length == 0) {
						toastr["warning"]("请填写QQ号码！", "Like_Girl");
						return false;
					} else if (name.length == 0) {
						toastr["warning"]("请填写恁的昵称！", "Like_Girl");
						return false;
					}
					let qqlength = /^[0-9]{6,10}$/;
					if (!qqlength.test(qq)) {
						toastr["warning"]("您的QQ号码格式错误 <br/> 请输入由6-10位的数字 <br/>组成的QQ号码！", "Like_Girl");
						return false;
					}
					if ((qq == 123456) || (qq == 100000) || (qq == 1234567)) {
						toastr["warning"]("我想也许这并不是您的QQ号码...", "Like_Girl");
						return false;
					}
					let text = document.getElementsByName('text')[0].value.trim();
					if (text.length == 0) {
						toastr["warning"]("请填写您要留言的内容！", "Like_Girl");
						return false;
					} else if (text.length <= 2) {
						toastr["warning"]("请填写两个字符以上的内容！", "Like_Girl");
						return false;
					}
					let nonub = /^[0-9]+$/;
					let filter = new RegExp("[]");
					let weifan = new RegExp("[]");
					if (filter.test(text)) {
						toastr["warning"]("您输入的内容含有非法字符！", "Like_Girl");
						return false;
					} else if (nonub.test(text)) {
						toastr["warning"]("内容为纯数字 已被拦截！", "Like_Girl");
						return false;
					} else if (weifan.test(text)) {
						toastr["warning"]("您输入的内容是违禁词 <br/>请注意您的发言不文明的留言 <br/>会被管理员拉进小黑屋喔", "Like_Girl");
						return false;
					}
				}

				$("#leavingPost").click(function() {
					$('#leavingPost').text('留言提交中...');
					$("#leavingPost").attr("disabled", "disabled");
					var qq = $("input[name='qq']").val();
					var name = $("input[name='name']").val();
					var text = $("textarea[name='text']").val();
					var ip = $("input[name='ip']").val();
					$.ajax({
						url: "admin/leavingPost.php",
						data: {
							qq: qq,
							name: name,
							text: text,
							ip: ip,
						},
						type: "POST",
						dataType: "text",
						success: function(res) {
							setInterval(() => {
								$('#leavingPost').removeAttr("disabled");
							}, 5000);
							if (res == 1) {
								toastr["success"]("留言提交成功 请刷新本页查看！", "Like_Girl");
								$('#leavingPost').text('留言成功');
							} else if (res == 0) {
								toastr["error"]("留言提交失败！", "Like_Girl");
								$('#leavingPost').text('留言失败');
							} else if (res == 3 || res == 30) {
								toastr["error"]("留言失败——QQ号码格式错", "Like_Girl");
								$('#leavingPost').text('留言失败');
							} else if (res == 4 || res == 40) {
								toastr["error"]("留言失败——IP格式错误", "Like_Girl");
								$('#leavingPost').text('留言失败');
							} else if (res == 5 || res == 50) {
								toastr["error"]("留言失败——参数错误", "Like_Girl");
								$('#leavingPost').text('留言失败');
							} else if (res == 8) {
								toastr["error"]("留言失败——你今天已经留言过了~", "Like_Girl");
								$('#leavingPost').text('留言失败');
							} else {
								toastr["error"]("未知错误！", "Like_Girl");
							}
						},
						error: function(err) {
							toastr["error"]("网络错误 请稍后重试！", "Like_Girl");
						}
					})
				})

				function loadingname() {
					$('body').loading({
						loadingWidth: 240,
						title: '获取昵称头像中',
						name: 'test',
						discription: '请稍等片刻',
						direction: 'column',
						type: 'origin',
						// originBg:'#71EA71',
						originDivWidth: 40,
						originDivHeight: 40,
						originWidth: 6,
						originHeight: 6,
						smallLoading: false,
						loadingMaskBg: 'rgba(0,0,0,0.2)'
					});

				}
			</script>
		</div>

		<script src="toastr/toastr.js"></script>
		<div id="pjax-container">
			<script>
				$(function() {
					$("img[src$=jpg],img[src$=gif],img[src$=JPG],img[src$=png],img[src$=jpeg]").addClass("spotlight").each(
						function() {
							this.onclick = function() {
								return hs.expand(this)
							}
						});

				})
			</script>
			<style>
				.icon {
					width: 1.5em;
					height: 1.5em;
					vertical-align: -0.3em;
					fill: currentColor;
					overflow: hidden;
				}

				li.cike {
					border-bottom: 1px solid #ddd;
				}

				li {
					list-style-type: none;
				}

				.cike:hover {
					cursor: pointer;
					cursor: url(cur/hover.cur), pointer;
				}

				button:disabled {
					background: #888;
					opacity: 0.6;
				}

				.avatar {
					width: 2.5em;
					height: 2.5em;
					border-radius: 50%;
					box-shadow: 0 2px 8px #a9a9a98c;
					border: 2px solid #fff;
					margin-right: 0.8rem;
				}
			</style>
		</div>
		<div class="footer-warp">
			<div class="footer">
				<p><a href="https://beian.miit.gov.cn/#/Integrated/index" target="_blank">冀ICP备2022003289号-15</a>奇偶猫</p>
				<p>Copyright © 2022 Like_GirllV5.0 Web. All Rights Reserved.</p>
			</div>
		</div>
		<script>
			$(function() {
				toastr.options = {
					"closeButton": true,
					"debug": false,
					"newestOnTop": false,
					"progressBar": true,
					"rtl": false,
					"positionClass": "toast-top-right",
					"preventDuplicates": false,
					"onclick": null,
					"showDuration": 300,
					"hideDuration": 1000,
					"timeOut": 5000,
					"extendedTimeOut": 1000,
					"showEasing": "swing",
					"hideEasing": "linear",
					"showMethod": "fadeIn",
					"hideMethod": "fadeOut"
				};

			})
		</script>


	</body>
</html>